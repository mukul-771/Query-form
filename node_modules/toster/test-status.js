import { serializeError } from './util';

class TestStatus {
  constructor(name) {
    this.name = name;

    this.duration = -1;
  }

  toString() {
    return this.name;
  }
}

export const SUCCESS = new TestStatus('SUCCESS');
export const NOT_EXECUTED = new TestStatus('NOT_EXECUTED');
export const SKIP = new TestStatus('SKIP');


export class TestTimeoutStatus extends TestStatus {
  constructor(timeout) {
    super('TIMEOUT');

    this.timeout = timeout;
  }
}

export class TestFailStatus extends TestStatus {
  constructor(err) {
    super('FAIL');

    this.error = err;
  }

  toJSON() {
    return {
      name: this.name,
      error: serializeError(this.error)
    };
  }
}

export const SUITE_FAIL = new TestFailStatus(new Error('At least one test failed'));
